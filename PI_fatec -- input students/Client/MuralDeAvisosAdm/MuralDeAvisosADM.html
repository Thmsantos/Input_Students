<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="MuralDeAvisosADM.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    <script src="MuralDeAvisosADM.js"></script>
    <title>Mural de Avisos</title>
</head>

<body>
    <div class="container">
        <div id="item1">
            <nav id="side-bar">
                <!--<div class="btn-menu">
                    <img src="menu.png" id="expandir">
                </div>-->

                <ul>
                    <li class="pag-menu" name="perfil">
                        <a href="#" onclick="redirecionarPerfil()">
                            <span class="icon">
                                <img src="perfilIcon.png">
                            </span>
                            <span class="txt-link">Perfil</span>
                        </a>
                    </li>
                    <li class="pag-menu" name="mural">
                        <a href="#" onclick="redirecionarMural()">
                            <span class="icon">
                                <img src="mural.png">
                            </span>
                            <span class="txt-link">Mural</span>
                        </a>
                    </li>
                    <li class="pag-menu" name="blog">
                        <a href="#" onclick="redirecionarBlog()">
                            <span class="icon">
                                <img src="blog.png">
                            </span>
                            <span class="txt-link">Blog</span>
                        </a>
                    </li>
                    <li class="pag-menu" name="sair">
                        <a href="../BlogInicial/index.html">
                            <span class="icon">
                                <img src="sair.png">
                            </span>
                            <span class="txt-link">Sair</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div id="item2"></div>
        <div id="item22">

            <button id="botao" onclick="openModal('dv-modal1')"></button>

        </div>
        <div id="item3">
            <p id="title">Oportunidades</p>
        </div>
        <div id="item4">
            <p id="title">Eventos</p>
        </div>
        <div id="item5">
            <p id="title">Secret치ria</p>
        </div>
        <div id="item6">
            
        </div>
        <div id="item7">

        </div>
        <div id="item8">

        </div>
        <div id="item9"></div>

        <!--Modal para Editar-->

        <div id="dv-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">Editar</div>

                <div class="modal-body">
                    <form id="edit_data">
                        <label for="oportunidades">Oportunidades</label>
                        <br>
                        <input id="editDataOP" name="idPost" placeholder="ID do campo">
                        <textarea id="title1Input" name="opt" rows="4" cols="50"></textarea><br>

                        <label for="eventos">Eventos</label>
                        <br>
                        <input id="editDataEv" name="idEv" placeholder="ID do campo">
                        <textarea id="title2Input" name="evt" rows="4" cols="50"></textarea><br>

                        <label for="secretaria">Secret치ria</label>
                        <br>
                        <input id="editDataSec" name="idSec" placeholder="ID do campo">
                        <textarea id="title3Input" name="sct" rows="4" cols="50"></textarea><br>

                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn">Salvar</button>
                    <button class="btn" onclick="closeModal('dv-modal')">Fechar</button>
                </div>
                </form>
            </div>
        </div>

        <!--Modal de adicionar-->
        <div id="dv-modal-adc" class="modal">
            <div class="modal-content">
                <div class="modal-header">Adicionar</div>

                <div class="modal-body">
                    <form id="adcDATA">
                        <label for="oportunidades">Oportunidades</label>
                        <textarea id="title1Input" name="ADCopt" rows="4" cols="50"></textarea><br><br>

                        <label for="eventos">Eventos</label>
                        <textarea id="title2Input" name="ADCevt" rows="4" cols="50"></textarea><br><br>

                        <label for="secretaria">Secret치ria</label>
                        <textarea id="title3Input" name="ADCsct" rows="4" cols="50"></textarea><br><br>

                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn">Salvar</button>
                    <button class="btn" onclick="closeModal('dv-modal-adc')">Fechar</button>
                </div>
                </form>
            </div>
        </div>

        <!--Modal de excluir-->
        <div id="dv-modal-rem" class="modal">
            <div class="modal-content">
                <div class="modal-header">Excluir</div>

                <div class="modal-body">
                    <form id="deldata">
                        <label for="oportunidades">Oportunidades</label>
                        <br>
                        <input id="editDataOP" name="idDelOp" placeholder="ID do campo">

                        <label for="eventos">Eventos</label>
                        <br>
                        <input id="editDataOP" name="idDelEv" placeholder="ID do campo">

                        <label for="secretaria">Secret치ria</label>
                        <br>
                        <input id="editDataOP" name="idDelSC" placeholder="ID do campo">

                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn">Salvar</button>
                    <button class="btn" onclick="closeModal('dv-modal-rem')">Fechar</button>
                </div>
                </form>
            </div>
        </div>


        <!--Modal para senha-->
        <div id="dv-modal1" class="modal">
            <div class="modal-content1">
                <div class="modal-header">Editar - Acesso ADM</div>

                <div class="modal-body">
                    <form>
                        <label for="oportunidades">Senha de Administrador</label>
                        <input id="senhaInput" type="password" name="senha">
                    </form>
                </div>

                <div class="modal-footer">
                    <button class="btn" onclick="closeModal('dv-modal1')">Fechar</button>
                    <button class="btn" onclick="verificarSenha()">Editar</button>
                    <button class="btn" onclick="verificarSenha1()">Adicionar</button>
                    <button class="btn" onclick="verificarSenha2()">Excluir</button>
                </div>
            </div>
        </div>
    </div>

    </form>
    <script>

        const addSEC = document.querySelector("#adcDATA");

        addSEC.addEventListener("submit", (event) => {
            event.preventDefault();

            const formADCNsecretaria = new FormData(addSEC);

            let descAdd = formADCNsecretaria.get("ADCsct");

            if (descAdd != "") {
                const data = new URLSearchParams(formADCNsecretaria)

                fetch('http://localhost:5433/projeto/addSecretaria', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        "descricao": `${descAdd}`,
                    })
                }).then(res => res.json())
                    .then(data => console.log(data))
                    .catch(error => console.log(error))
            }

        })

        const addEv = document.querySelector("#adcDATA");

        addEv.addEventListener("submit", (event) => {
            event.preventDefault();

            const formADCNeventos = new FormData(addEv);

            let descAdd = formADCNeventos.get("ADCevt");

            if (descAdd != "") {
                const data = new URLSearchParams(formADCNeventos)

                fetch('http://localhost:5433/projeto/addEventos', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        "descricao": `${descAdd}`,
                    })
                }).then(res => res.json())
                    .then(data => console.log(data))
                    .catch(error => console.log(error))
            }

        })

        const addOP = document.querySelector("#adcDATA");

        addOP.addEventListener("submit", (event) => {
            event.preventDefault();

            const formADCN = new FormData(addOP);

            let descAdd = formADCN.get("ADCopt");

            if (descAdd != "") {

                const data = new URLSearchParams(formADCN)

                fetch('http://localhost:5433/projeto/addOportunidades', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        "descricao": `${descAdd}`,
                    })
                }).then(res => res.json())
                    .then(data => console.log(data))
                    .catch(error => console.log(error))
            }

        })


        const delSC = document.querySelector("#deldata")

        delSC.addEventListener("submit", (event) => {
            event.preventDefault();

            const formDelSC = new FormData(delSC);

            let idDel = formDelSC.get("idDelSC")

            const data = new URLSearchParams(formDelSC)
            const url = `http://localhost:5433/projeto/delSC/${idDel}`
            console.log(url)
            fetch(url, {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' }
            }).then(res => res.json())
                .then(data => console.log(data))
                .catch(error => console.log(error))
        })

        const delOp = document.querySelector("#deldata")

        delOp.addEventListener("submit", (event) => {
            event.preventDefault();

            const formDelOp = new FormData(delOp);

            let idDel = formDelOp.get("idDelOp")

            const data = new URLSearchParams(formDelOp)
            const url = `http://localhost:5433/projeto/delOport/${idDel}`
            console.log(url)
            fetch(url, {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' }
            }).then(res => res.json())
                .then(data => console.log(data))
                .catch(error => console.log(error))
        })

        const delEv = document.querySelector("#deldata")

        delEv.addEventListener("submit", (event) => {
            event.preventDefault();

            const formDelEv = new FormData(delEv);

            let idDel = formDelEv.get("idDelEv")

            const data = new URLSearchParams(formDelEv)
            const url = `http://localhost:5433/projeto/delEve/${idDel}`
            console.log(url)
            fetch(url, {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' }
            }).then(res => res.json())
                .then(data => console.log(data))
                .catch(error => console.log(error))
        })

        const formEditEv = document.querySelector("#edit_data");

        formEditEv.addEventListener("submit", (event) => {
            event.preventDefault();

            const formData = new FormData(formEditEv);

            let idPost = formData.get("idEv")
            let Desc = formData.get("evt")

            const data = new URLSearchParams(formData)
            const url = `http://localhost:5433/projeto/updEventos/${idPost}`
            console.log(url)
            fetch(url, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    "descricao": `${Desc}`
                })
            }).then(res => res.json())
                .then(data => console.log(data))
                .catch(error => console.log(error))

        })


        const formEditSec = document.querySelector("#edit_data");

        formEditSec.addEventListener("submit", (event) => {
            event.preventDefault();

            const formData = new FormData(formEditSec);

            let idPost = formData.get("idSec")
            let Desc = formData.get("sct")

            const data = new URLSearchParams(formData)
            const url = `http://localhost:5433/projeto/updSecretaria/${idPost}`
            console.log(url)
            fetch(url, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    "descricao": `${Desc}`
                })
            }).then(res => res.json())
                .then(data => console.log(data))
                .catch(error => console.log(error))

        })


        const formEditOp = document.querySelector("#edit_data");

        formEditOp.addEventListener("submit", (event) => {
            event.preventDefault();

            const formData = new FormData(formEditOp);

            let idPost = formData.get("idPost")
            let Desc = formData.get("opt")

            const data = new URLSearchParams(formData)
            const url = `http://localhost:5433/projeto/updOportunidades/${idPost}`
            console.log(url)
            fetch(url, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    "descricao": `${Desc}`
                })
            }).then(res => res.json())
                .then(data => console.log(data))
                .catch(error => console.log(error))

        })


        //eventos

        fetch("http://localhost:5433/projeto/eventos")
            .then((res) => {
                return res.json();
            })
            .then((data) => {
                let indice = Object.keys(data);
                let valores = Object.values(data);
                console.log(valores)

                for (i = 0; i < indice.length; i++) {
                    const html = `
                    <p>${valores[i].idEventos} - ${valores[i].descricao}</p>
                    <br>
                `;
                    document.querySelector("#item7").insertAdjacentHTML("beforeend", html);
                }
            })
            .catch((error) => console.log(error));


        // oportunidades

        fetch("http://localhost:5433/projeto/oportunidades")
            .then((res) => {
                return res.json();
            })
            .then((data) => {
                let indice = Object.keys(data);
                let valores = Object.values(data);

                for (i = 0; i < indice.length; i++) {
                    const html = `
                    <p>${valores[i].idOportunidades} - ${valores[i].descricao}</p>
                    <br>
                `;
                    document.querySelector("#item6").insertAdjacentHTML("beforeend", html);
                }
            })
            .catch((error) => console.log(error));

        //secretaria

        fetch("http://localhost:5433/projeto/secretaria")
            .then((res) => {
                return res.json();
            })
            .then((data) => {
                let indice = Object.keys(data);
                let valores = Object.values(data);

                for (i = 0; i < indice.length; i++) {
                    const html = `
                <p>${valores[i].idSecretaria} - ${valores[i].descricao}</p>
                <br>
            `;
                    document.querySelector("#item8").insertAdjacentHTML("beforeend", html);
                }
            })
            .catch((error) => console.log(error));
    </script>
</body>

</html>
